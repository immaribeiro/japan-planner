{% extends "base.html" %}

{% block content %}
<div class="space-y-6">
    <!-- Back button -->
    <a href="/cities" class="text-gray-400 hover:text-white inline-flex items-center gap-2">
        ‚Üê Back to Cities
    </a>

    <!-- City Header -->
    <div class="bg-gray-800 rounded-lg overflow-hidden shadow-lg">
        <div class="h-48 bg-cover bg-center relative" style="background-image: url('{{ city.image_url or '' }}'); background-color: #1e3a5f;">
            <div class="absolute inset-0 bg-gradient-to-t from-gray-900 to-transparent"></div>
            <div class="absolute bottom-4 left-4">
                <h1 class="text-4xl font-bold text-white">{{ city.name }}</h1>
                <p class="text-gray-300">{{ city.country }}</p>
            </div>
        </div>
        <div class="p-6">
            <p class="text-gray-300 text-lg">{{ city.description }}</p>
        </div>
    </div>

    <!-- Quick Info -->
    <div class="grid md:grid-cols-3 gap-4">
        <div class="bg-gray-800 rounded-lg p-4">
            <div class="text-gray-400 text-sm">Recommended Days</div>
            <div class="text-2xl font-bold text-white">{{ city_info.recommended_days }}</div>
        </div>
        <div class="bg-gray-800 rounded-lg p-4">
            <div class="text-gray-400 text-sm">Best For</div>
            <div class="text-lg text-white">{{ city_info.best_for }}</div>
        </div>
        <div class="bg-gray-800 rounded-lg p-4">
            <div class="text-gray-400 text-sm">Budget (per day)</div>
            <div class="text-lg text-white">¬•{{ city_info.daily_budget }}</div>
        </div>
    </div>

    <!-- Map -->
    <div class="bg-gray-800 rounded-lg p-4 shadow-lg">
        <h2 class="text-xl font-bold text-white mb-4">üìç Location</h2>
        <div id="cityMap" class="h-64 rounded-lg"></div>
    </div>

    <!-- Must-See Attractions -->
    <div class="bg-gray-800 rounded-lg p-4 shadow-lg">
        <h2 class="text-xl font-bold text-white mb-4">üèØ Must-See Attractions</h2>
        <div class="grid md:grid-cols-2 gap-4">
            {% for attraction in city_info.attractions %}
            <div class="bg-gray-700 rounded-lg p-4">
                <h3 class="font-semibold text-white">{{ attraction.name }}</h3>
                <p class="text-gray-400 text-sm mt-1">{{ attraction.description }}</p>
                {% if attraction.url %}
                <a href="{{ attraction.url }}" target="_blank" class="text-blue-400 text-sm mt-2 inline-block hover:text-blue-300">
                    Learn more ‚Üí
                </a>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Food & Dining -->
    <div class="bg-gray-800 rounded-lg p-4 shadow-lg">
        <h2 class="text-xl font-bold text-white mb-4">üçú Food & Dining</h2>
        <div class="grid md:grid-cols-2 gap-4">
            {% for food in city_info.food %}
            <div class="bg-gray-700 rounded-lg p-4">
                <h3 class="font-semibold text-white">{{ food.name }}</h3>
                <p class="text-gray-400 text-sm mt-1">{{ food.description }}</p>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Tips -->
    <div class="bg-gray-800 rounded-lg p-4 shadow-lg">
        <h2 class="text-xl font-bold text-white mb-4">üí° Tips</h2>
        <ul class="space-y-2">
            {% for tip in city_info.tips %}
            <li class="text-gray-300 flex items-start gap-2">
                <span class="text-green-400">‚úì</span>
                {{ tip }}
            </li>
            {% endfor %}
        </ul>
    </div>

    <!-- Useful Links -->
    <div class="bg-gray-800 rounded-lg p-4 shadow-lg">
        <h2 class="text-xl font-bold text-white mb-4">üîó Useful Links</h2>
        <div class="flex flex-wrap gap-3">
            {% for link in city_info.links %}
            <a href="{{ link.url }}" target="_blank" class="bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition">
                {{ link.name }} ‚Üí
            </a>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    var map = L.map('cityMap').setView([{{ city.lat }}, {{ city.lon }}], 12);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; OpenStreetMap contributors &copy; CARTO',
        maxZoom: 19
    }).addTo(map);
    L.marker([{{ city.lat }}, {{ city.lon }}]).addTo(map)
        .bindPopup('<b>{{ city.name }}</b>').openPopup();
</script>
{% endblock %}
